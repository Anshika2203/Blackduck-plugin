FROM alpine:latest

RUN apk add --no-cache bash curl openjdk11-jre

ENV DETECT_SOURCE=https://sig-repo.synopsys.com/artifactory/bds-integrations-release/com/synopsys/integration/synopsys-detect/9.7.0/synopsys-detect-9.7.0.jar

RUN mkdir -p /opt/linuxarm64 && \
    curl -L -o /opt/linuxarm64/synopsys-detect.jar --progress-bar "${DETECT_SOURCE}"

COPY release/linux/arm64/blackduck-plugin /bin/

ENTRYPOINT ["/bin/blackduck-plugin"]